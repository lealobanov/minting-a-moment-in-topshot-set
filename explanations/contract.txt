The Set resource in the contract is central to minting Moments, which are represented as NFT resources. To mint a Moment, you use the mintMoment function in the Set resource, providing the playID of the play you want to mint. When a play is added to a set, the number of Moments minted for that play is initialized to zero. The mintMoment function first checks preconditions to ensure that the specified play exists in the set and has not been retired. If these conditions are met, the function retrieves the current count of minted Moments for the play, increments it, and uses it as the serial number for the new Moment. A new Moment NFT is then created with the provided parameters, and the count of minted Moments for the play is updated.

The minted Moment is returned as an NFT resource, ready to be stored in a recipient's collection. For cases where a large number of Moments need to be minted efficiently, the batchMintMoment function allows multiple Moments to be minted at once. This function creates a temporary collection resource, mints the specified number of Moments, and deposits them into the collection. Once all the Moments are minted, the collection is returned, enabling batch deposits into the recipient's account.

The Moments themselves are structured to include metadata such as their unique ID, the play and set they reference, and their serial number. These NFTs can be deposited into a Collection resource, which manages ownership of Moments and facilitates operations like withdrawal, deposit, and locking. Batch operations are supported for both withdrawal and deposit, streamlining the handling of multiple Moments. 